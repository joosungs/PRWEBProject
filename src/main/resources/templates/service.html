<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- basic -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- mobile metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <!-- site metas -->
    <title>service</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- bootstrap css -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <!-- style css -->
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <!-- Responsive-->
    <link rel="stylesheet" href="css/responsive.css">
    <!-- fevicon -->
    <link rel="icon" href="images/fevicon.png" type="image/gif" />
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
    <!-- Tweaks for older IEs-->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    <!-- owl stylesheets -->
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">
</head>
<script>
    let fileIdx = 0;

    function addFile() {

        const fileDivs = $('div[data-name="fileDiv"]');
        if (fileDivs.length > 2) {
            alert('파일은 최대 3 개까지 업로드 할 수 있습니다.');
            return false;
        }

        fileIdx++;

        const fileHtml = `
		<div data-name="fileDiv" class="form-group filebox bs3-primary">
			<label for="file_${fileIdx}" class="col-sm-2 control-label"></label>
			<div class="col-sm-10">
				<label for="file_${fileIdx}" class="control-label">찾아보기</label>
				<input type="file" name="files" id="file_${fileIdx}" class="upload-hidden" onchange="changeFilename(this)" />

				<button type="button" onclick="removeFile(this)" class="btn btn-bordered btn-xs visible-xs-inline visible-sm-inline visible-md-inline visible-lg-inline">
					<i class="fa fa-minus" aria-hidden="true"></i>
				</button>
			</div>
		</div>
	`;

        $('#btnDiv').before(fileHtml);
    }


    function removeFile(elem) {

        const prevTag = $(elem).prev().prop('tagName');
        if (prevTag === 'BUTTON') {
            const file = $(elem).prevAll('input[type="file"]');
            const filename = $(elem).prevAll('input[type="text"]');
            file.val('');
            filename.val('파일 찾기');
            return false;
        }

        const target = $(elem).parents('div[data-name="fileDiv"]');
        target.remove();
    }

    function changeFilename(file) {

        file = $(file);
        const filename = file[0].files[0].name;
        const target = file.prevAll('input');
        target.val(filename);
    }
    function chk_form() {
        if(document.getElementById("file_0").value==''){
            alert("파일이 없습니다.");
            return false;
        }

        document.getElementById('frm').submit();
    }
</script>
<body>
<!-- header section start -->
<div class="header_section">
    <div class="container-fluid">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="logo"><a href="home"><img src="images/logo.png"></a></div>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="home">home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="service">service</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="ctb">contributor</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="elastic">elastic</a>
                    </li>
                </ul>
                <form class="form-inline my-2 my-lg-0">
                    <h1 class="call_text">음식 재료가 부족하면 마켓컬리로 ~~</h1>
                </form>
                <div class="search_icon">
                    <ul>
                        <li><a href="https://www.kurly.com" target="_blank"><img src="images/market.png"></a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
</div>
<!-- header section end -->
<!-- contact section start -->
<div class="contact_section layout_padding">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <h1 class="contact_text">Upload</h1>
                <div class="mail_sectin">
                    <h3 class="dummy_text">찍은 사진을 업로드 해주세요!</h3>
                    <form id="frm" class="form-horizontal" action="serviceAction" method="post" enctype="multipart/form-data">
                        <div data-name="fileDiv" class="form-group filebox bs3-primary">
                            <div class="col-sm-10">
                                <label for="file_0" class="control-label">찾아보기</label>
                                <input type="file" name="files" id="file_0" class="upload-hidden" onchange="changeFilename(this)" />

                                <button type="button" onclick="addFile()" class="btn btn-bordered btn-xs visible-xs-inline visible-sm-inline visible-md-inline visible-lg-inline">
                                    <i class="fa fa-plus" aria-hidden="true"></i>
                                </button>
                            </div>
                        </div>
                        <div id="btnDiv" class="send_bt" onclick="return chk_form()"><a>Start</a></div>
                    </form>
                </div>
            </div>
            <div class="col-md-6">
                <h1 class="contact_text">Picture</h1>
                <div class="image_9"><img src="images/salmon1.png"></div>
            </div>
        </div>
    </div>
</div>


<!-- copyright section end -->
<!-- Javascript files-->
<script src="js/jquery.min.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.bundle.min.js"></script>
<script src="js/jquery-3.0.0.min.js"></script>
<script src="js/plugin.js"></script>
<!-- sidebar -->
<script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="js/custom.js"></script>
<!-- javascript -->
<script src="js/owl.carousel.js"></script>
<script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
</body>
</html>